
<!DOCTYPE html>
<html lang="cmn-Hans">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>JavaScript prototype 介绍 | 一斤瓜子铺</title><link rel="canonical" href="https://caixw.io/posts/2010/javascript-prototype.html" /><link rel="icon" type="image/svg&#43;xml" href="/favicon.svg" />
        <link rel=”mask-icon” href=”/favicon.svg” color=”#000000” /><link rel="alternate" type="application/rss+xml" title="RSS" href="https://caixw.io/rss.xml" /><link rel="alternate" type="application/atom+xml" title="Atom" href="https://caixw.io/atom.xml" /><meta name="keywords" content="Javascript,prototype" /><link rel="next" href="https://caixw.io/posts/2010/spl-iterator.html" /><link rel="prev" href="https://caixw.io/posts/2012/jquery-plugin.html" />

        <link rel="stylesheet" type="text/css" href="https://caixw.io/themes/default/style.css" /><script type="application/ld+json">
        {"@context":"https://schema.org/","@type":"Blog","name":"JavaScript prototype 介绍","author":[{"@type":"Person","name":"caixw","url":"https://caixw.io"}],"dateCreated":"2010-08-15T04:37:27+08:00","dateModified":"2010-08-15T04:37:27+08:00","license":"https://creativecommons.org/licenses/by/4.0/deed.zh","keywords":"Javascript,prototype","inLanguage":"cmn-Hans"}
        </script></head>

    <body>

    <main id="main">

<article class="post">
<h1>JavaScript prototype 介绍</h1>
<div class="meta">
    <span class="item">
        <span class="value">作者:</span>
            <a class="value" href="https://caixw.io">caixw</a>
            </span>

    <div class="item">
        <span class="value">标签:</span><a class="value" href="https://caixw.io/tags/javascript.html">JavaScript</a></div>

    <div class="item" title="修改时间:2010-08-15T04:37:27&#43;08:00&#10;添加时间:2010-08-15T04:37:27&#43;08:00">
        <span class="value">修改时间:</span>
        <time class="value">2010-08-15</time>
    </div>
</div>
<article>
<p>一说到 prototype 很多人可能第一个想到的是著名的 prototype.js 框架，当然我们今天说的不是它，而是 JavaScript 中的 prototype 属性，一般都被翻译为“原型”。这是一个比较特殊的属性，Javascript 中的继承一般都依赖这属性实现。</p>
<p>在 JavaScript 中，一切都是对象，字符串是对象，数组是对象，变量是对象，函数也是对象，所以才会允许 <code>['a','b','c'].push('d');</code> 这样的操作存在。类本身也是一个对象，也可以定义属性和方法：</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Test</span>(){};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">str</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;str&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">fun</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(){<span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;fun&#39;</span>;};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">str</span>;    <span style="color:#75715e">// str
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">fun</span>();  <span style="color:#75715e">// fun
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#75715e"></span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">inst</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">str</span>;    <span style="color:#75715e">// undefined
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">r4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">fun</span>();  <span style="color:#75715e">// undefined
</span></pre><p>prototype 就是一个作用于类的属性。默认情况下，所有 JavaScript 类都会有一个 prototype 属性，但是类实例没有。</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Test</span>(){};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">typeof</span>(String.<span style="color:#a6e22e">prototype</span>);       <span style="color:#75715e">// object
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">typeof</span>(<span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span>);         <span style="color:#75715e">// object
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p3</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>().<span style="color:#a6e22e">prototype</span>);   <span style="color:#75715e">// undefined
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p4</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">typeof</span>(Object.<span style="color:#a6e22e">prototype</span>);       <span style="color:#75715e">// object
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p5</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">typeof</span>(<span style="color:#66d9ef">new</span> Object().<span style="color:#a6e22e">prototype</span>); <span style="color:#75715e">// undefined
</span></pre><h2>取值与赋值</h2>
<p>在 JavaScript 中，当我们取一个对象中并不存在的属性或是方法时，它会试图查看该对象所对应的类中的 prototype 属性中是否包含该属性或是方法，而 prototype 也是一个 JavaScript 对象，若是其中也没有，该 prototype 又会访问它对应的类的 prototype，如此一级级地向上访问，直到找到需要的属性或方法，或是 prototype 属性为 null。</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Test</span>(){};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;str&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">pt1</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">test1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;pt1&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">pt2</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">test2</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;pt2&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#a6e22e">pt2</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">test3</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;test3&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#a6e22e">pt2</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">test1</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;test4&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#a6e22e">pt1</span>.<span style="color:#a6e22e">prototype</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">pt2</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">pt1</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">inst</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">test</span>;  <span style="color:#75715e">// undefined
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">test1</span>; <span style="color:#75715e">// pt1 而不是 test4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">test2</span>; <span style="color:#75715e">// pt2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst</span>.<span style="color:#a6e22e">test3</span>; <span style="color:#75715e">// test3
</span></pre><p>相对于取值，赋值就简单得多了。它并不会一层层向上查找 prototype 中的属性值，而直接对当前的实例进行赋值，没有则创建。</p>
<h2>内置类的增强</h2>
<p>在 JavaScript 中并不能直接修改内置类的 prototype。但是可以通过修改 prototype 的属性达到修改内置类行为的目的。</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>Array.<span style="color:#a6e22e">prototype</span> <span style="color:#f92672">=</span> { <span style="color:#75715e">// 不起作用
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">push</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;test1&#39;</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>    }
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>Array.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">push</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() { <span style="color:#75715e">// 可以
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;test2&#39;</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>};
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array(<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#a6e22e">test</span>.<span style="color:#a6e22e">push</span>(<span style="color:#e6db74">&#39;d&#39;</span>); <span style="color:#75715e">// test2
</span></pre><p>一次可以插入多个元素的 <code>Array.push</code> 函数：</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>Array.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">pushs</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pos</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">length</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>    <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">&amp;</span><span style="color:#a6e22e">lt</span>;<span style="color:#a6e22e">arguments</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>        <span style="color:#66d9ef">this</span>[<span style="color:#f92672">++</span><span style="color:#a6e22e">pos</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">arguments</span>[<span style="color:#a6e22e">i</span>];
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>    }
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">length</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Array(<span style="color:#e6db74">&#39;a&#39;</span>,<span style="color:#e6db74">&#39;b&#39;</span>,<span style="color:#e6db74">&#39;c&#39;</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#a6e22e">test</span>.<span style="color:#a6e22e">pushs</span>(<span style="color:#e6db74">&#39;d&#39;</span>,<span style="color:#e6db74">&#39;e&#39;</span>);
</pre><p>值得注意的是，为内置类的 prototype 添加的函数，在使用 <code>for</code> 语句输出属性时，也会被显示：</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">str</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">test</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    <span style="color:#a6e22e">str</span> <span style="color:#f92672">+=</span> (<span style="color:#e6db74">&#39;  &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>); <span style="color:#75715e">// &#39;0   1  2  3  4  5  pushs&#39; pushs 自定义函数。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#75715e"></span>}
</pre><p>但是可以通过 <code>hasOwnProperty()</code> 进行判断：</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">str</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">test</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">test</span>.<span style="color:#a6e22e">hasOwnProperty</span>(<span style="color:#a6e22e">i</span>)) { <span style="color:#75715e">// 过滤掉 pushs 函数。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">str</span> <span style="color:#f92672">+=</span> (<span style="color:#e6db74">&#39;  &#39;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">i</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    }
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>}
</pre><h2>一点点注意事项</h2>
<p>前面说过，prototype 是类的一个属性。更改 prototype 中的属性值，有可能会带来意想不到的灾难！</p>
<pre style="color:#f8f8f2;background-color:#272822"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Test</span>(){}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">inst1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">inst2</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>();
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>; <span style="color:#75715e">// 所有指向 Test.prototype.num 的值。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst1</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst2</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#75715e"></span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#a6e22e">inst1</span>.<span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;          <span style="color:#75715e">// 赋值，会为 inst 对象创建一个 num 属性。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#75715e"></span><span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">6</span>; <span style="color:#75715e">// 所有指向 Test.prototype.num 的值。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst1</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// 5 这里返回的是刚创建的 inst1.num 的值，而不是 Test.prototype.num 的值。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst2</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#75715e"></span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#66d9ef">delete</span> <span style="color:#a6e22e">Test</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">num</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p5</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst1</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// 5 inst1.num 依然存在。
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">p6</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">inst2</span>.<span style="color:#a6e22e">num</span>;     <span style="color:#75715e">// undefined Test.prototype.num 被删除了。
</span></pre>
</article>
</article>

<div class="pages-nav">
                <span class="prev">
                        <a rel="prev" href="https://caixw.io/posts/2012/jquery-plugin.html" aria-label="前一页">&#171;&#160;jQuery 插件开发简要介绍</a>
                    </span>
                <span class="next">
                        <a rel="next" href="https://caixw.io/posts/2010/spl-iterator.html" aria-label="后一页">SPL 中的迭代器&#160;&#187;</a>
                    </span>
            </div>

        </main> 

        <footer id="footer">
            <div class="line">
                <a class="item" href="https://caixw.io">首页</a>
                <a class="item" href="https://caixw.io/tags.html">标签</a>
                <a class="item" href="https://caixw.io/archive.html">存档</a>
                <a class="item" href="https://caixw.io/rss.xml">RSS</a>
                <a class="item" href="https://caixw.io/atom.xml">Atom</a>
                <a class="item" href="https://caixw.io/sitemap.xml">Sitemap</a>
            </div>

            <div class="line">
                <span class="item">&#169; 2016-2021 by
                    <a href="https://caixw.io" type="text/html">caixw</a>
                </span>
                <span class="item">主题采用 <a href="https://caixw.io">default</a></span>
                <span class="item">
                    由 <a href="https://github.com/caixw/blogit" type="text/html">blogit</a> 构建于
                    <time title="2021-03-26T17:43:57Z">2021-03-26</time>
                </span>
            </div>
        </footer>
    </body>
</html>
